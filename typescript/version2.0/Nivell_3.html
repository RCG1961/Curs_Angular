<html>
<head>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  
    <!-- popper -->
   
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    
    
    <!-- librerias de jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.0/jquery.validate.min.js"></script>
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
 
    <script src="coches.js"></script>

<style>
    ::-webkit-input-placeholder { color: red; font-style: italic; }
      label {
          margin-bottom: 0.1em;
          margin-top: 0.5em;
      }
     #enviar{
       position: absolute;
       left: 400px; 
       top:100px;
       width: 150px;
       height: 50px;
       border-color: red;
       border-radius: 13px;
       background-color: rgb(149, 149, 218);
       color:black;
     } 
     #one{
      text-align:center;
      font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      font-style: bold;
     }
    #myFrame{
      visibility:"hidden";
      opacity:0;
    }
    
    h4{
      background-color:rgb(71, 184, 27);
      color:#c91d1d;
      border-color:magenta;
      border-style:double;
      border-radius:19px;
      font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    }
    .ruedas{
     
      text-align:center;
      font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      font-size: 28px;
      color:rgb(253, 250, 243);
    }
    #final{
      opacity:0;
      background-color:yellow;
      text-align:center;
      font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      font-size: 28px;
      color:rgb(34, 37, 189);
    }
  </style>

<body class="bg-info">
 
    <div class="container mt-5" id="midiv">
        <div class="row justify-content-center">
            <div class="col-6 p-5 bg-warning shadow-lg rounded ">
                 
    <form id="formulario" target="" action="" name="formulario" >
    <p>
      <label for="matricula">Matricula .........<span></span></label>
      <input id="matricula" name="matricula" minlength="7" maxlength="7" type="text" required placeholder="Matricula" >
      <span class="errorMatricula" id="errorMatricula"></span>
    </p>
    <p>
      <label for="marca">Marca ............... <span></span></label>
      <input id="marca" type="text" name="marca" required placeholder="Marca">
      
    </p>
    <p>
        <label for="color">Color ................<span></span></label>
        <input id="color" type="text" name="color" required placeholder="Color">
        
    </p>    
    <p>
      <!--<input class="submit" type="button" value="Crear Coche" >-->
      <input type="submit" value="CREAR COCHE" name="enviar" id="enviar">
    </p>
    <p id="one">Todos los campos son requeridos y necesarios</p>
</form>

</div>
</div>
</div>



<!--Formulario bootstrap-->
<div class="container py-5" id="myFrame">
  <div class="text-center">
      <h2>Ruedas del Vehículo</h2>
      <h4 class="py-4" id="noucotxe"></h4>
  </div>
  <form id="form_ruedas" action="#" class="row justify-content-center">
      <div class="form-g roup col-md-3">
          <label for="marca1">Marca rueda 1<span></span></label>
          <input id="m1" type="text" placeholder="marca" class="form-control" required>
      </div>
      <div class="form-group col-md-3">
          <label for="marca2">Marca rueda 2<span></span></label>
          <input  id="m2" type="text" placeholder="marca" class="form-control"required>
      </div>
      <div class="form-group col-md-3">
          <label for="marca3">Marca rueda 3<span></span></label>
          <input  id="m3" type="text" placeholder="marca" class="form-control"required>
      </div>
      <div class="form-group col-md-3">
          <label for="marca4">Marca rueda 4<span></span></label>
          <input  id="m4" type="text" placeholder="marca" class="form-control"required>
      </div>
      <div class="form-group col-md-3">
          <label for="diametro1">Diámetro Rueda 1<span></span></label>
          <input  id="r1" placeholder="diámetro" class="form-control" type="number" min="0.4" step="0.1" max="2" required>
      </div>
      <div class="form-group col-md-3">
          <label for="diametro2">Diámetro Rueda 2<span></span></label>
          <input  id="r2"  placeholder="diámetro" class="form-control"  type="number" min="0.4"step="0.1" max="2" required>
      </div>
      <div class="form-group col-md-3">
          <label for="diametro3">Diámetro Rueda 3<span></span></label>
          <input  id="r3" placeholder="diámetro" class="form-control"  type="number" min="0.4" step="0.1" max="2" required>
      </div>
      <div class="form-group col-md-3">
          <label for="diametro4">Diámetro Rueda 4<span></span></label>
          <input  id="r4" placeholder="diámetro" class="form-control" type="number" min="0.4" step="0.1" max="2" required>
      </div>
      <div class="fcol-md-12 p-4">
         <div class="row justify-content-center">
            <!--   <input type="submit2" value="Añadir Ruedas" name="enviar2" id="enviar2"> -->
         <button class="btn btn-primary col-md-12" onclick="Rodes();">Añadir Ruedas</button> 
         </div>
      </div>
  </form>
</div>
<div id="uno" class="ruedas"></div>
<div id="dos" class="ruedas"></div>
 <center><button id="final" class="btn btn-warning col-md-3" onclick="Repetir();">Añadir Nuevo Coche</button></center> 

<script>
    window.addEventListener("load",function(){
         document.formulario.addEventListener("submit",validarFormulario);
         document.getElementById("errorMatricula").innerHTML= "";
        
    });		 
    
    function validarFormulario(e){
        
        e = e || window.event;   
        let expresion = window.formulario.matricula.value.toUpperCase();
        var regular=/^[0-9]{4}[A-Z]{3}/;                 //formato matricula 4 numeros y 3 letras
        if(!regular.test(expresion)){
          e.preventDefault();
          document.getElementById("errorMatricula").innerHTML= "Pon 4 numeros y 3 letras";
          document.getElementById("errorMatricula").setAttribute("style","color:red;");
        }
        else{
            //podríamos escribir si quisiéramos document.formulario.submit() y forzaríamos el envío pero es innecesario porqué se hará igualmente.
           // document.getElementById("midiv").style.display="none";
            let uno = window.formulario.matricula.value.toUpperCase();  
            let dos = window.formulario.marca.value.toUpperCase(); 
            let tres = window.formulario.color.value.toUpperCase(); 
            console.log ('matricula: '+uno+' marca: '+dos+' color: '+tres);
            createCar(uno,dos,tres);
            ArrayCar(car);                         // pujant el car a la Array
            //document.getElementById("midiv").style.display="none";
            //document.getElementById("midiv").style.opacity="0";
            //document.getElementById("midiv").style.visibility="hidden";
            //document.getElementById("myFrame").style.display="block";
           
            document.getElementById("final").style.opacity="0";
            document.getElementById("myFrame").style.opacity="1";
            document.getElementById("noucotxe").innerText ='COCHE==> '+'matricula: '+car.plate+'  color: '+car.color+' fabricante: '+car.brand;
            global = document.getElementById("midiv").innerHTML;
            document.getElementById("midiv").innerHTML='';
        }
      }
       
      

      function Rodes(){
        
            let x1 = (document.getElementById("m1").value).toUpperCase();
            let x2 = (document.getElementById("m2").value).toUpperCase();
            let x3 = (document.getElementById("m3").value).toUpperCase();
            let x4 = (document.getElementById("m4").value).toUpperCase(); 
            
            let y1 = (parseFloat(document.getElementById("r1").value)).toFixed(2); 
            let y2 = (parseFloat(document.getElementById("r2").value)).toFixed(2);  
            let y3 = (parseFloat(document.getElementById("r3").value)).toFixed(2);  
            let y4 = (parseFloat(document.getElementById("r4").value)).toFixed(2);  
            
            if(y1<.4 | y1>2){
              alert('El diámetre de la roda 1 no es correcta. '+y1+'\nEls valors tenen que estar entre 0.4 i 2');
            }
            else if(y2<.4 | y2>2){
              alert('El diámetre de la roda fa-stack-2x no es correcta. '+y2+'\nEls valors tenen que estar entre 0.4 i 2');
            }
            else if(y3<.4 | y3>2){
              alert('El diámetre de la roda 3 no es correcta. '+y3+'\nEls valors tenen que estar entre 0.4 i 2');
            }
            else if(y4<.4 | y4>2){
              alert('El diámetre de la roda 4 no es correcta. '+y4+'\nEls valors tenen que estar entre 0.4 i 2');
            }
            else{ 
              if(isNaN(y1||y2||y3||y4)){    
                alert('Error en los datos hay algun campo en blanco')
              }
              else{
              document.getElementById("uno").innerHTML='Rueda 1 fabricante:'+x1+'   Diámetro: '+y1+'         Rueda 2 fabricante:'+x2+'   Diámetro: '+y2;
              document.getElementById("dos").innerHTML='Rueda 3 fabricante:'+x3+'   Diámetro: '+y3+'         Rueda 2 fabricante:'+x4+'   Diámetro: '+y4;
               alert();
              addrueda(y1,x1);
              addrueda(y2,x2);
              addrueda(y3,x3);
              addrueda(y4,x4);
              document.getElementById("final").style.opacity="1";
              }
            }
        
      }

    function Repetir(){
     
      document.getElementById("midiv").innerHTML = global;
      document.getElementById("final").style.opacity="0";
      document.getElementById("myFrame").style.opacity="0";
      document.getElementById("midiv").style.opacity="1";
      alert();
    }
    </script>        
</body>
</html>  